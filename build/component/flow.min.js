const t=new CSSStyleSheet;t.replaceSync("/*box-sizing: border-box;*/\n\n@keyframes f-animation-open {\n\n\t0% { \n\t\ttransform: scale(.5);\n\t\topacity: 0;\n\t}\n\t\n\t100% { \n\t\ttransform: scale(1);\n\t\topacity: 1;\n\t}\n\n}\n\nf-canvas,\nf-canvas canvas {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 100%;\n\theight: 100%;\n\t/*scroll-behavior: smooth;*/\n\t-webkit-touch-callout: none;   \n}\n\nf-canvas {\n\toverflow: auto;\n\tcursor: grab;\n}\n\nf-canvas canvas.front {\n\tz-index: 10;\n}\n\nbody.dragging *:not(.drag) {\n\tpointer-events: none !important;\n}\n\nf-canvas.grabbing * {\n\tcursor: grabbing; \n\tuser-select: none;\n}\n\nf-canvas canvas {\n\tposition: fixed;\n\toverflow: hidden;\n\tpointer-events: none;\n}\n\nf-canvas::-webkit-scrollbar {\n\twidth: 8px;\n\theight: 8px;\n}\n\nf-canvas::-webkit-scrollbar-thumb:hover{\n\tbackground: #014fc5;\n}\n\nf-canvas::-webkit-scrollbar-track {\n\tbackground: #363636;\n}\n\nf-canvas::-webkit-scrollbar-thumb {\n\tbackground-color: #666666;\n\tborder-radius: 10px;\n\tborder: 0;\n}\n\nf-canvas f-content,\nf-canvas f-area {\n\tposition: absolute;\n    display: block;\n}\n\nf-node {\n\tposition: absolute;\n\tmargin: 0;\n\tpadding: 0;\n\tuser-select: none;\n\twidth: 320px;\n\tz-index: 1;\n\tcursor: auto;\n\t/*box-shadow: 0 0 8px 5px #00000061;*/\n\tfilter: drop-shadow(0 0 10px #00000061);\n\tbackdrop-filter: blur(4px);\n}\n\nf-node.selected {\n\tz-index: 2;\n}\n\nf-node.selected,\nf-canvas.dragging-rio f-node:hover,\nf-canvas.dragging-lio f-node:hover {\n\tfilter: drop-shadow(0 0 10px #00000061) drop-shadow(0 0 8px #4444dd);\n}\n\nf-node.closed f-element:not(:first-child) {\n\tdisplay: none;\n}\n\nf-node.center {\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate( -50%, -50% );\n}\n\nf-node.top-right {\n\ttop: 0;\n\tright: 0;\n}\n\nf-node.top-center {\n\ttop: 0;\n\tleft: 50%;\n\ttransform: translateX( -50% );\n}\n\nf-node.top-left {\n\ttop: 0;\n\tleft: 0;\n}\n\nf-node {\n\ttransition: filter 0.2s ease;\n}\n\nf-node {\n\tanimation: .2s f-animation-open 1 alternate ease-out;\n}\n\nf-tips,\nf-drop,\nf-menu,\nf-menu input,\nf-menu button,\nf-element,\nf-element input,\nf-element select,\nf-element button,\nf-element textarea {\n\tfont-family: 'Open Sans', sans-serif;\n\tfont-size: 13px;\n\ttext-transform: capitalize;\n\tcolor: #eeeeee;\n\toutline: solid 0px #000;\n\t/*letter-spacing: .2px;*/\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tuser-select: none;\n\t-webkit-tap-highlight-color: transparent;\n\ttransition: background 0.2s ease, filter 0.2s ease;\n}\n\nf-element input:read-only {\n\tcolor: #666;\n}\n\nf-element input,\nf-element textarea {\n    text-transform: initial;\n}\n\nf-element input {\n\ttransition: background 0.1s ease;\n}\n\nf-element input,\nf-element select,\nf-element button,\nf-element textarea {\n\tbackground-color: #232324d1;\n}\n\nf-element {\n\tposition: relative;\n\twidth: calc( 100% - 14px );\n\tbackground: rgba(45, 45, 48, 0.95);\n\tpointer-events: auto;\n\tborder-bottom: 2px solid #232323;\n\tdisplay: flex;\n\tpadding-left: 7px;\n\tpadding-right: 7px;\n\tpadding-top: 2px;\n\tpadding-bottom: 2px;\n}\n\nf-element:after,\nf-element:before {\n\ttransition: opacity .17s;\n\topacity: 0;\n\tcontent: '';\n}\n\nf-element[tooltip]:hover:after,\nf-element[tooltip]:focus-within:after {\n\tfont-size: 14px !important;\n\tdisplay: flex;\n\tjustify-content: center;\n\tposition: fixed;\n\tmargin-left: -7px;\n\twidth: calc( 100% );\n\tbackground: #1d1d1de8;\n\tborder: 1px solid #444444a1;\n\tborder-radius: 6px;\n\tcolor: #dadada;\n\tcontent: attr( tooltip );\n\tmargin-top: -41px;\n\tfont-size: 16px;\n\tpadding-top: 3px;\n\tpadding-bottom: 3px;\n\tz-index: 10;\n\topacity: 1;\n\tbackdrop-filter: blur(4px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-shadow: 1px 1px 0px #0007;\n}\n\nf-element[tooltip]:hover:before,\nf-element[tooltip]:focus-within:before {\n\tborder: solid;\n\tborder-color: #1d1d1de8 transparent;\n\tborder-width: 12px 6px 0 6px;\n\tleft: calc( 50% - 6px );\n\tbottom: 30px;\n\tposition: absolute;\n\topacity: 1;\n\tz-index: 11;\n}\n\nf-element[error] {\n\tbackground-color: #ff0000;\n}\n\nf-element[error]:hover:after,\nf-element[error]:focus-within:after {\n\tborder: none;\n\tbackground-color: #ff0000bb;\n\tfilter: drop-shadow( 2px 2px 5px #000 );\n\tcolor: #fff;\n}\n\nf-element[error]:hover:before,\nf-element[error]:focus-within:before {\n\tborder-color: #ff0000bb transparent;\n}\n\nf-element/*.default*/ {\n    height: 24px;\n}\n\nf-element input {\n\tmargin-top: 2px;\n\tmargin-bottom: 2px;\n\tbox-shadow: inset 0px 1px 1px rgb(0 0 0 / 20%), 0px 1px 0px rgb(255 255 255 / 5%);\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n\twidth: 100%;\n\tpadding-left: 4px;\n\tpadding-right: 4px;\n}\n\nf-element input.number {\n\tcursor: col-resize;\n}\n\nf-element input:focus[type='text'], \nf-element input:focus[type='range'], \nf-element input:focus[type='color'] {\n    background: rgba( 0, 0, 0, 0.6 );\n\toutline: solid 1px rgba( 0, 80, 200, 0.98 );\n}\n\nf-element input[type='color'] {\n\tappearance: none;\n\tpadding: 0;\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n\theight: calc( 100% - 4px );\n\tmargin-top: 2px;\n\tborder: none;\n}\n\nf-element input[type='color']::-webkit-color-swatch-wrapper {\n\tpadding: 2px;\n}\n\nf-element input[type='color']::-webkit-color-swatch {\n\tborder: none;\n\tcursor: alias;\n}\n\nf-element input[type='range'] {\n\tappearance: none;\n\twidth: 100%;\n\toverflow: hidden;\n\tpadding: 0;\n\tcursor: ew-resize;\n}\n\nf-element input[type='range']::-webkit-slider-runnable-track {\n\tappearance: none;\n    height: 10px;\n    color: #13bba4;\n\tmargin: 0;\n}\n\nf-element input[type='range']::-webkit-slider-thumb {\n\tappearance: none;\n\twidth: 0;\n    background: #434343;\n    box-shadow: -500px 0 0 500px rgba( 0, 120, 255, 0.98 );\n    border-radius: 50%;\n    border: 0 !important;\n}\n\nf-element input[type='range']::-webkit-slider-runnable-track {\n\tmargin-left: -4px;\n\tmargin-right: -5px;\n}\n\nf-element input[type='checkbox'] {\n\tappearance: none;\n\tcursor: pointer;\n}\n\nf-element input[type='checkbox'].toggle {\n\theight: 20px;\n\twidth: 45px;\n\tborder-radius: 16px;\n\tdisplay: inline-block;\n\tposition: relative;\n\tmargin: 0;\n\tmargin-top: 2px;\n\tbackground: linear-gradient( 0deg, #292929 0%, #0a0a0ac2 100% );\n\ttransition: all 0.2s ease;\n}\n\nf-element input[type='checkbox'].toggle:after {\n\tcontent: \"\";\n\tposition: absolute;\n\ttop: 2px;\n\tleft: 2px;\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 50%;\n\tbackground: white;\n\tbox-shadow: 0 1px 2px rgba(44, 44, 44, 0.2);\n\ttransition: all 0.2s cubic-bezier(0.5, 0.1, 0.75, 1.35);\n}\n\nf-element input[type='checkbox'].toggle:checked {\n\tbackground: linear-gradient( 0deg, #0177fb 0%, #0177fb 100% );\n}\n\nf-element input[type='checkbox'].toggle:checked:after {\n\ttransform: translatex(25px);\n}\n\nf-element.auto-height {\n\tdisplay: table;\n}\n\nf-element textarea {\n\twidth: calc( 100% - 18px );\n\tpadding-top: 1px;\n\tpadding-bottom: 3px;\n\tpadding-left: 3px;\n\tpadding-right: 8px;\n\tmargin-top: 2px;\n\tmargin-left: 2px;\n\theight: calc( 100% - 8px );\n\tmax-height: 300px;\n\tborder-radius: 2px;\n\tresize: none;\n\tbox-shadow: inset 0px 1px 1px rgb(0 0 0 / 20%), 0px 1px 0px rgb(255 255 255 / 5%);\n}\n\nf-element.auto-height textarea {\n\tresize: auto;\n}\n\nf-element select {\n\twidth: 100%;\n\tmargin-top: 2px;\n\tmargin-bottom: 2px;\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n\t/*padding-left: 5px;*/\n\tcursor: pointer;\n\tbox-shadow: inset 0px 1px 1px rgb(0 0 0 / 20%), 0px 1px 0px rgb(255 255 255 / 5%);\n}\n\nf-element f-toolbar {\n\tposition: absolute;\n\tdisplay: flex;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\talign-content: space-around;\n}\n\nf-element.input-right f-toolbar {\n\tright: 7px;\n\tfloat: right;\n\tjustify-content: end;\n}\n\nf-element f-toolbar {\n\tmargin-top: auto;\n\tmargin-bottom: auto;\n\tmargin-left: 3px;\n\tmargin-right: 3px;\n\tfont-size: 18px;\n    line-height: 18px;\n}\n\nf-element f-toolbar button {\n\topacity: .7;\n\tcursor: pointer;\n\tfont-size: 14px;\n\twidth: unset;\n    height: unset;\n    border-radius: unset;\n    border: unset;\n\toutline: 0;\n\tbackground-color: unset;\n\tbox-shadow: unset;\n}\n\nf-element f-toolbar button:hover,\nf-element f-toolbar button:active {\n\topacity: 1;\n\tborder: 0;\n\tbackground-color: unset;\n}\n\nf-element input.range-value {\n\twidth: 60px;\n\ttext-align: center;\n}\n\nf-menu.context button,\nf-element button {\n\twidth: 100%;\n\theight: calc( 100% - 4px );\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n\tmargin-top: 2px;\n\tborder-radius: 3px;\n\tcursor: pointer;\n\t/*text-transform: uppercase;*/\n}\n\nf-element button {\n\tbox-shadow: inset 1px 1px 1px 0 rgb(255 255 255 / 17%), inset -2px -2px 2px 0 rgb(0 0 0 / 26%);\n}\n\nf-element button:hover {\n\tcolor: #fff;\n\tbackground-color: #2a2a2a;\n}\n\nf-element button:active {\n\t/*background: rgba( 0, 0, 0, 0.6 );*/\n\tborder: 1px solid rgba( 0, 120, 255, 0.98 );\n}\n\nf-element f-inputs,\nf-element f-subinputs {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\twidth: 100%;\n}\n\nf-element f-inputs {\n\tleft: 100px;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\tposition: absolute;\n\twidth: calc( 100% - 106px );\n\theight: calc( 100% - 4px );\n\tz-index: 1;\n}\n\nf-element.inputs-disable f-inputs {\n\tfilter: grayscale(100%);\n    opacity: .5;\n}\n\nf-element.inputs-disable f-inputs input {\n\tpointer-events: none;\n}\n\nf-element f-label,\nf-element span {\n\tmargin: auto;\n\ttext-shadow: 1px 1px 0px #0007;\n}\n\nf-element f-label {\t\n\tpadding-left: 4px;\n\twhite-space: nowrap;\n\tposition: absolute;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\twidth: calc( 100% - 20px );\n}\n\nf-element.right f-label {\n\ttext-align: right;\n}\n\nf-element.center f-label {\n\ttext-align: center;\n}\n\nf-element f-label i {\n\tfloat: left;\n\tfont-size: 18px;\n\tmargin-right: 6px;\n}\n\nf-element f-label.center {\n\twidth: 100%;\n\ttext-align: center;\n\tdisplay: block;\n}\n/*\nf-element f-label.center {\n\twidth: 100%;\n\theight: 100%;\n\tposition: absolute;\n\tjustify-content: center;\n    align-items: center;\n    display: flex;\n}\n*/\nf-element.title {\n\theight: 29px;\n\tbackground-color: #3a3a3ab0;\n\tbackground-color: #3b3b43ed;\n    /*background-color: linear-gradient( rgb(1 119 251), rgba(0, 80, 200, 0.73) );*/\n\tcursor: all-scroll;\n\tborder-top-left-radius: 6px;\n    border-top-right-radius: 6px;\n}\n\nf-element.blue {\n\tbackground-color: #014fc5;\n}\n\nf-element.red {\n\tbackground-color: #bd0b0b;\n}\n\nf-element.green {\n\tbackground-color: #148d05;\n}\n\nf-element.yellow {\n\tbackground-color: #d6b100;\n}\n\nf-element.title.left {\n\ttext-align: left;\n\tdisplay: inline-grid;\n\tjustify-content: start;\n}\n\nf-element.title span {\n\ttext-align: center;\n\tfont-size: 15px;\n\tpadding-top: 2px;\n}\n\nf-element.title i {\n\tfont-size: 18px;\n\tposition: absolute;\n\tright: 10px;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\topacity: .5;\n}\n\nf-element.title f-toolbar i {\n\tfont-size: 20px;\n\tright: unset;\n\tleft: 0px;\n}\n\nf-element.input-right.title i {\n\tleft: 10px;\n\tright: unset;\n}\n\nf-element.title.left span {\n\ttext-align: left;\n}\n\nf-element f-io {\n\tborder: 2px solid #dadada;\n\twidth: 7px;\n\theight: 7px;\n\tposition: absolute;\n\tbackground: #242427;\n\tborder-radius: 8px;\n\tfloat: left;\n\tleft: -7px;\n\ttop: calc( 50% - 5px );\n\tcursor: alias;\n\tbox-shadow: 0 0 3px 2px #0000005e;\n\tz-index: 1;\n}\n\nf-element f-io.connect,\nf-canvas.dragging-rio f-element:hover f-io.lio,\nf-canvas.dragging-lio f-element:hover f-io.rio {\n\tzoom: 1.4;\n}\n\nf-node.io-connect f-io:not(.connect) {\n\tborder: 2px solid #dadada !important;\n\tzoom: 1 !important;\n}\n\nf-element f-io.rio {\n\tfloat: right;\n    right: -7px;\n    left: unset;\n}\n\nf-element f-disconnect {\n\tposition: absolute;\n\tleft: -35px;\n\ttop: 50%;\n\tfont-size: 22px;\n\ttransform: translateY( -50% );\n\tfilter: drop-shadow(0 0 5px #000);\n\ttext-shadow: 0px 0px 5px black;\n\tcursor: pointer;\n\ttransition: all .2s;\n}\n\nf-element.input-right f-disconnect {\n\tright: -35px;\n\tleft: unset;\n}\n\nf-element f-disconnect:hover {\n\tcolor: #ff3300;\n}\n\nf-element textarea::-webkit-scrollbar {\n\twidth: 6px;\n}\n\nf-element textarea::-webkit-scrollbar-track {\n\tbackground: #111; \n}\n \nf-element textarea::-webkit-scrollbar-thumb {\n\tbackground: #0177fb; \n}\n\nf-element textarea::-webkit-scrollbar-thumb:hover {\n\tbackground: #1187ff; \n}\n\nf-element.small {\n    height: 18px;\n}\n\nf-element.large {\n    height: 36px;\n}\n\nbody.connecting f-node:not(.io-connect) f-element:hover,\nf-element.select {\n\tbackground-color: rgba(61, 70, 82, 0.98);\n}\n\nf-element.invalid > f-io {\n\tzoom: 1 !important;\n}\n\nf-element.invalid::after {\n\tfont-size: 14px !important;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items:center;\n\tmargin: auto;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: #bd0b0b77;\n\tvertical-align: middle;\n\tcolor: #fff;\n\tcontent: 'Not Compatible';\n\topacity: .95;\n\tbackdrop-filter: grayscale(100%);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\tleft: 0;\n\ttop: 0;\n\ttext-transform: initial;\n}\n\nf-element.invalid > f-inputs,\nf-element.invalid > f-label,\nf-element.invalid > input,\nf-element.invalid > select {\n\topacity: .1;\n}\n\n/* drop */\n\nf-drop {\n\twidth: 100%;\n\theight: 100%;\n\tposition: sticky;\n\tleft: 0;\n\ttop: 0;\n\tbackground: #02358417;\n\ttext-align: center;\n\tjustify-content: center;\n\talign-items: center;\n\tdisplay: flex;\n\tbox-shadow: inset 0 0 20px 10px #464ace17;\n\tpointer-events: none;\n\ttransition: all .07s;\n\topacity: 0;\n\tvisibility: hidden;\n}\n\nf-drop.visible {\n\tvisibility: unset;\n\topacity: unset;\n\ttransition: all .23s;\n}\n\nf-drop span {\n\topacity: .5;\n\tfont-size: 40px;\n\ttext-shadow: 0px 0px 5px #000;\n\tfont-weight: bold;\n}\n\n/* menu */\n\nf-tooltip {\n\tpointer-events: none;\n}\n\nf-tooltip {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\t\n\tbackground: rgba(0,0,0,.8);\n\tbackdrop-filter: blur(4px);\n\tfont-size: 14px;\n\tpadding: 7px;\n\tleft: 50%;\n\tborder-radius: 10px;\n\ttransform: translateX(-50%);\n\tvisibility: hidden;\n\tpointer-events: none;\n\topacity: 0;\n\ttransition: all 0.3s ease;\n\tz-index: 150;\n\twhite-space: nowrap;\n}\n\nf-menu.context,\nf-menu.search {\n\tposition: absolute;\n}\n\nf-menu.context {\n\twidth: 170px;\n\tz-index: 110;\n}\n\nf-menu.search {\n\tbottom: 85px;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tz-index: 10;\n\twidth: 300px;\n}\n\nf-menu.context f-list {\n\tdisplay: block;\n\tmargin: 0;\n\tbackground: #171717e6;\n\tfont-size: 12px;\n\tborder-radius: 6px;\n\tbackdrop-filter: blur(6px);\n\tborder: 1px solid #7e7e7e45;\n\tbox-shadow: 3px 3px 6px rgba(0,0,0,.2);\n\ttransition: opacity 0.2s ease, transform 0.1s ease;\n}\n\nf-menu.search f-list {\n\tmargin: 0 6px 0 6px;\n\tdisplay: flex;\n    flex-direction: column-reverse;\n\tmargin-bottom: 5px;\n}\n\nf-menu.context.hidden {\n\tvisibility: hidden;\n\t/*transform: translateX(-10px);*/\n\topacity: 0;\n}\n\nf-menu.context f-item,\nf-menu.search f-item {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n\nf-menu.search f-item {\n\topacity: 0;\n}\n\nf-menu.context f-item.submenu::after {\n\tcontent: \"\";\n\tposition: absolute;\n\tright: 6px;\n\ttop: 50%;\n\t-webkit-transform: translateY(-50%);\n\ttransform: translateY(-50%);\n\tborder: 5px solid transparent;\n\tborder-left-color: #808080;\n}\n\nf-menu.context f-item:hover > f-menu,\nf-menu.context f-item.active > f-menu {\n\tvisibility: unset;\n\ttransform: unset;\n\topacity: unset;\n}\n\nf-menu.context f-menu {\n\ttop: 0px;\n\tleft: calc( 100% - 4px );\n}\n\nf-menu.context f-item button,\nf-menu.search f-item button {\n\toverflow: visible;\n\tdisplay: block;\n\twidth: calc( 100% - 6px );\n\ttext-align: left;\n\tcursor: pointer;\n\twhite-space: nowrap;\n\tpadding: 6px 8px;\n\tborder-radius: 3px;\n\tbackground: rgba(45, 45, 48, 0.95);\n\tborder: 0;\n\tcolor: #ddd;\n\tmargin: 3px;\n\ttext-shadow: 1px 1px 0px #0007;\n}\n\nf-menu.context f-item button i,\nf-menu.search f-item button i {\n\tfloat: left;\n\tfont-size: 16px;\n}\n\nf-menu.context f-item button span,\nf-menu.search f-item button span {\n\tmargin-left: 6px;\n}\n\nf-menu.context f-item:hover > button,\nf-menu.search f-item:hover > button,\nf-menu.search f-item.active > button {\n\tcolor: #fff;\n\tbackground-color: rgba(61, 70, 82, 0.98);\n}\n\nf-menu.search f-item:hover,\nf-menu.search f-item.active {\n\topacity: 1 !important;\n}\n\nf-menu.context f-item button:active {\n\toutline: solid 1px rgba( 0, 80, 200, 0.98 );\n}\n\nf-menu.context f-item f-tooltip {\n\tmargin-left: 85px;\n\ttop: -50px;\n}\n\nf-menu.search f-item {\n\tdisplay: none;\n}\n\nf-menu.search f-item:nth-child(1) {\n\topacity: 1;\n\tdisplay: unset;\n}\n\nf-menu.search f-item:nth-child(2) {\n\topacity: .8;\n\tdisplay: unset;\n}\n\nf-menu.search f-item:nth-child(3) {\n\topacity: .6;\n\tdisplay: unset;\n}\n\nf-menu.search f-item:nth-child(4) {\n\topacity: .4;\n\tdisplay: unset;\n}\n\nf-menu.search f-item button {\n    border-radius: 14px;\n}\n\n/* tips */\n\nf-tips {\n\tright: 10px;\n\ttop: 10px;\n    position: absolute;\n\tz-index: 100;\n\tpointer-events: none;\n\tdisplay: flex;\n    flex-direction: column/*-reverse*/;\n}\n\nf-tips f-tip {\n    width: 450px;\n    font-size: 13px;\n    border-radius: 6px;\n    text-align: center;\n    display: block;\n    height: auto;\n    color: #ffffffe0;\n\tmargin: 4px;\n\tpadding: 4px;\n    background: #17171794;\n    border: 1px solid #7e7e7e38;\n    line-height: 100%;\n\tbackdrop-filter: blur(6px);\n\ttransition: all 0.2s ease;\n\ttext-transform: initial;\n\topacity: 0;\n}\n\nf-tips f-tip:nth-child(1) {\n\topacity: 1;\n}\n\nf-tips f-tip:nth-child(2) {\n\topacity: .75;\n}\n\nf-tips f-tip:nth-child(3) {\n\topacity: .25;\n}\n\nf-tips f-tip:nth-child(4) {\n\topacity: .1;\n}\n\nf-tips f-tip.error {\n\tbackground: #b900005e;\n}\n\n/* circle/search */\n\nf-menu.search input {\n\twidth: calc( 100% - 28px );\n\theight: 41px;\n\tposition: absolute;\n\tz-index: 10;\n\tborder-radius: 20px;\n\tpadding-left: 14px;\n\tpadding-right: 14px;\n\tfont-size: 15px;\n\tbackground-color: #17171794;\n\tborder: 1px solid #7e7e7e45;\n\tbackdrop-filter: blur(6px);\n\tbox-shadow: 3px 3px 6px rgb(0 0 0 / 20%);\n\ttext-transform: initial;\n}\n\nf-menu.circle {\n\tposition: absolute;\n\tleft: 40px;\n\tbottom: 40px;\n\tz-index: 100;\n}\n\nf-menu.circle f-item {\n\t/*display: flex;*/\n\t/*justify-content: end;*/\n    align-content: space-around;\n\tmargin-right: 20px;\n}\n\nf-menu.circle f-item button {\n\twidth: 47px;\n\theight: 47px;\n\tfont-size: 22px;\n\tbackground: #17171794;\n\tborder-radius: 50%;\n\tbackdrop-filter: blur(6px);\n\tborder: 1px solid #7e7e7e45;\n\tline-height: 100%;\n\tcursor: pointer;\n\tbox-shadow: 3px 3px 6px rgba(0,0,0,.2);\n}\n\nf-menu.circle f-item f-tooltip {\n\tmargin-top: -60px;\n}\n\n/* rounded */\n\n.f-rounded f-node f-element,\n.f-rounded f-node f-element.title.left {\n\tborder-radius: 10px 5px 10px 5px;\n}\n\n.f-rounded f-node f-element input, \n.f-rounded f-node f-element select,\n.f-rounded f-node f-element button,\n.f-rounded f-node f-element textarea,\n.f-rounded f-node f-element input[type='checkbox'].toggle,\n.f-rounded f-node f-element input[type='checkbox'].toggle:after {\n\tborder-radius: 20px 10px;\n}\n\n.f-rounded f-node f-element input {\n\tpadding-left: 7px;\n\tpadding-right: 7px;\n}\n\n.f-rounded f-menu.context,\n.f-rounded f-menu.context f-item button {\n\tborder-radius: 20px 10px;\n}\n\n/* desktop */\n\n@media (hover: hover) and (pointer: fine) {\n\n\tf-node:not(.selected):hover {\n\t\tfilter: drop-shadow(0 0 6px #66666630);\n\t}\n\n\tf-element f-toolbar {\n\t\tvisibility: hidden;\n\t\topacity: 0;\n\t\ttransition: opacity 0.2s ease;\n\t}\n\n\tf-node:hover > f-element f-toolbar {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n\n\tf-element f-io:hover {\n\t\tzoom: 1.4;\n\t}\n\t\n\tf-menu.circle f-item button:hover {\n\t\tbackground-color: #2a2a2a;\n\t}\n\n\tf-menu.search input:hover,\n\tf-menu.search input:focus {\n\t\tbackground-color: #1a1a1a;\n\t\tfilter: drop-shadow(0 0 6px #66666630);\n\t}\n\n\tf-menu.search input:focus {\n\t\tfilter: drop-shadow(0 0 8px #4444dd);\n\t}\n\n\tf-menu.circle f-item button:hover > f-tooltip,\n\tf-menu.context f-item button:hover > f-tooltip {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n\n\tf-menu.circle f-item button:hover > f-tooltip {\n\t\tmargin-top: -50px;\n\t}\n\n\tf-menu.context f-item button:hover > f-tooltip {\n\t\t/*margin-left: 120px;*/\n\t\ttop: -30px;\n\t}\n\n\tf-menu.circle f-item button:focus > f-tooltip,\n\tf-menu.context f-item button:focus > f-tooltip {\n\t\tvisibility: hidden;\n\t\topacity: 0;\n\t}\n\n}\n\n/* mobile */\n\n@media (hover: none) and (pointer: coarse) {\n\n\tbody.dragging f-canvas,\n\tbody.connecting f-canvas {\n\t\toverflow: hidden !important;\n\t}\n\n}\n\n/* optimizations */\n\nf-canvas {\n\twill-change: top, left;\n}\n\nf-node {\n\twill-change: transform !important;\n}\n");let n=0;class e extends EventTarget{constructor(){super(),this._id=n++,this._serializable=!0}get id(){return this._id}setSerializable(t){return this._serializable=t,this}getSerializable(){return this._serializable}serialize(){console.warn("Serializer: Abstract function.")}deserialize(){console.warn("Serializer: Abstract function.")}toJSON(t=null){let n=null;const e=this.id;if(null!==t){const i=t.objects;n=i[e],void 0===n&&(n={objects:i},this.serialize(n),delete n.objects,i[e]=n)}else n={objects:{}},this.serialize(n);return n.id=e,n.type=this.constructor.name,n}}(new class{started=!1;constructor(){this.x=0,this.y=0,this._onMoveEvent=t=>{const n=t.touches?t.touches[0]:t;this.x=n.x,this.y=n.y}}start(){if(!this.started)return this.started=!0,window.addEventListener("wheel",this._onMoveEvent,!0),window.addEventListener("mousedown",this._onMoveEvent,!0),window.addEventListener("touchstart",this._onMoveEvent,!0),window.addEventListener("mousemove",this._onMoveEvent,!0),window.addEventListener("touchmove",this._onMoveEvent,!0),window.addEventListener("dragover",this._onMoveEvent,!0),this}}).start();const i=(t,n=null,e="dragging")=>{let i=null;const o=n=>{const e=n.touches?n.touches[0]:n;n.stopImmediatePropagation(),i={client:{x:e.clientX,y:e.clientY},delta:{x:0,y:0},start:{x:t.offsetLeft,y:t.offsetTop},dragging:!1,isTouch:!!n.touches},window.addEventListener("mousemove",s),window.addEventListener("mouseup",r),window.addEventListener("touchmove",s),window.addEventListener("touchend",r)},s=o=>{const{start:s,delta:r,client:a}=i,l=o.touches?o.touches[0]:o,d=(()=>{let n=t;for(;n&&!(n instanceof Document||n instanceof ShadowRoot);){const t=n.style.zoom;if(t)return Number(t);n=n.parentNode}return 1})();r.x=(l.clientX-a.x)/d,r.y=(l.clientY-a.y)/d,i.x=s.x+r.x,i.y=s.y+r.y,!0===i.dragging?(null!==n?n(i):t.style.cssText+=`; left: ${i.x}px; top: ${i.y}px;`,o.stopImmediatePropagation()):(Math.abs(r.x)>2||Math.abs(r.y)>2)&&(i.dragging=!0,t.classList.add("drag"),e&&document.body.classList.add(e),o.stopImmediatePropagation())},r=a=>{a.stopImmediatePropagation(),t.classList.remove("drag"),e&&document.body.classList.remove(e),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",r),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",r),null===n&&(t.removeEventListener("mousedown",o),t.removeEventListener("touchstart",o)),i.dragging=!1,null!==n&&n(i)};if(t instanceof Event){const n=t;t=n.target,o(n)}else t.addEventListener("mousedown",o),t.addEventListener("touchstart",o)},o=(t,...n)=>{for(const e of t)if(!1===e(...n))return!1;return!0},s=t=>(!1===isNaN(t)&&(t=`${t}px`),t),r=t=>(!1===isNaN(t)&&(t=`#${t.toString(16).padStart(6,"0")}`),t);class a extends e{constructor(){super();const t=document.createElement("f-node"),n=()=>{const t=this.canvas;null!==t&&t.select(this)};t.addEventListener("mousedown",n,!0),t.addEventListener("touchstart",n,!0),this._onConnect=t=>{const{target:n}=t;for(const t of this.elements)t!==n&&t.dispatchEvent(new Event("nodeConnect"))},this._onConnectChildren=t=>{const{target:n}=t;for(const t of this.elements)t!==n&&t.dispatchEvent(new Event("nodeConnectChildren"))},this.dom=t,this.style="",this.canvas=null,this.elements=[],this.events={focus:[],blur:[]},this.setWidth(300).setPosition(0,0)}onFocus(t){return this.events.focus.push(t),this}onBlur(t){return this.events.blur.push(t),this}setStyle(t){const n=this.dom;return this.style&&n.classList.remove(this.style),t&&n.classList.add(t),this.style=t,this}setPosition(t,n){const e=this.dom;return e.style.left=s(t),e.style.top=s(n),this}getPosition(){const t=this.dom;return{x:parseInt(t.style.left),y:parseInt(t.style.top)}}setWidth(t){return this.dom.style.width=s(t),this}getWidth(){return parseInt(this.dom.style.width)}add(t){return this.elements.push(t),t.node=this,t.addEventListener("connect",this._onConnect),t.addEventListener("connectChildren",this._onConnectChildren),this.dom.append(t.dom),this}remove(t){return this.elements.splice(this.elements.indexOf(t),1),t.node=null,t.removeEventListener("connect",this._onConnect),t.removeEventListener("connectChildren",this._onConnectChildren),this.dom.removeChild(t.dom),this}dispose(){const t=this.canvas;null!==t&&t.remove(this);for(const t of this.elements)t.dispose();this.dispatchEvent(new Event("dispose"))}isCircular(t){if(t===this)return!0;const n=this.getLinks();for(const e of n)if(e.outputElement.node.isCircular(t))return!0;return!1}getLinks(){const t=[];for(const n of this.elements)t.push(...n.links);return t}serialize(t){const{x:n,y:e}=this.getPosition(),i=[];for(const n of this.elements)i.push(n.toJSON(t).id);t.x=n,t.y=e,t.width=this.getWidth(),t.elements=i,""!==this.style&&(t.style=this.style)}deserialize(t){this.setPosition(t.x,t.y),this.setWidth(t.width),void 0!==t.style&&this.setStyle(t.style);const n=this.elements;if(n.length>0){let e=0;for(const i of t.elements)t.objects[i]=n[e++]}else for(const n of t.elements)this.add(t.objects[n])}}a.prototype.isNode=!0;class l{constructor(t=null,n=null){this.inputElement=t,this.outputElement=n}get lioElement(){return"left"===l.InputDirection?this.outputElement:this.inputElement}get rioElement(){return"left"===l.InputDirection?this.inputElement:this.outputElement}}l.InputDirection="left";let d=null;class c extends e{constructor(t=!1){super();const n=document.createElement("f-element");n.element=this;const e=t=>{let n=this;if(t.changedTouches&&t.changedTouches.length>0){const e=t.changedTouches[0];let i=document.elementFromPoint(e.clientX,e.clientY);for(;i&&(!i.element||!i.element.isElement);)i=i.parentNode;n=i?i.element:null}const e=t.type;d="mouseout"===e&&d===n?null:n};!1===t&&(n.ontouchstart=n.onmousedown=t=>{t.stopPropagation()}),n.addEventListener("mouseup",e,!0),n.addEventListener("mouseover",e),n.addEventListener("mouseout",e),n.addEventListener("touchmove",e),n.addEventListener("touchend",e),this.inputs=[],this.links=[],this.dom=n,this.lioLength=0,this.rioLength=0,this.events={connect:[],connectChildren:[],valid:[]},this.node=null,this.style="",this.object=null,this.objectCallback=null,this.enabledInputs=!0,this.visible=!0,this.inputsDOM=n,this.disconnectDOM=null,this.lioDOM=this._createIO("lio"),this.rioDOM=this._createIO("rio"),this.dom.classList.add(`input-${l.InputDirection}`),this.dom.append(this.lioDOM),this.dom.append(this.rioDOM),this.addEventListener("connect",(()=>{o(this.events.connect,this)})),this.addEventListener("connectChildren",(()=>{o(this.events.connectChildren,this)}))}setAttribute(t,n){return this.dom.setAttribute(t,n),this}onValid(t){return this.events.valid.push(t),this}onConnect(t,n=!1){return this.events.connect.push(t),n&&this.events.connectChildren.push(t),this}setObjectCallback(t){return this.objectCallback=t,this}setObject(t){return this.object=t,this}getObject(t=null){return this.objectCallback?this.objectCallback(t):this.object}setVisible(t){return this.visible=t,this.dom.style.display=t?"":"none",this}getVisible(){return this.visible}setEnabledInputs(t){const n=this.dom;return this.enabledInputs||n.classList.remove("inputs-disable"),t||n.classList.add("inputs-disable"),this.enabledInputs=t,this}getEnabledInputs(){return this.enabledInputs}setColor(t){return this.dom.style["background-color"]=r(t),this}setStyle(t){const n=this.dom;return this.style&&n.classList.remove(this.style),t&&n.classList.add(t),this.style=t,this}setInput(t){return"left"===l.InputDirection?this.setLIO(t):this.setRIO(t)}setInputColor(t){return"left"===l.InputDirection?this.setLIOColor(t):this.setRIOColor(t)}setOutput(t){return"left"===l.InputDirection?this.setRIO(t):this.setLIO(t)}setOutputColor(t){return"left"===l.InputDirection?this.setRIOColor(t):this.setLIOColor(t)}get inputLength(){return"left"===l.InputDirection?this.lioLength:this.rioLength}get outputLength(){return"left"===l.InputDirection?this.rioLength:this.lioLength}setLIOColor(t){return this.lioDOM.style["border-color"]=r(t),this}setLIO(t){return this.lioLength=t,this.lioDOM.style.visibility=t>0?"":"hidden",this}getLIOColor(){return this.lioDOM.style["border-color"]}setRIOColor(t){return this.rioDOM.style["border-color"]=r(t),this}getRIOColor(){return this.rioDOM.style["border-color"]}setRIO(t){return this.rioLength=t,this.rioDOM.style.visibility=t>0?"":"hidden",this}add(t){return this.inputs.push(t),t.element=this,this.inputsDOM.append(t.dom),this}setHeight(t){return this.dom.style.height=s(t),this}getHeight(){return this.dom.style.height}connect(t=null){if(null!==this.disconnectDOM&&this.disconnectDOM.dispatchEvent(new Event("disconnect")),null!==t){if(!1===o(this.events.valid,this,t,"connect"))return!1;const n=new l(this,t);if(this.links.push(n),null===this.disconnectDOM){this.disconnectDOM=document.createElement("f-disconnect"),this.disconnectDOM.innerHTML="âœ–",this.dom.append(this.disconnectDOM);const n=()=>{this.links=[],this.dom.removeChild(this.disconnectDOM),this.disconnectDOM.removeEventListener("mousedown",o,!0),this.disconnectDOM.removeEventListener("touchstart",o,!0),this.disconnectDOM.removeEventListener("disconnect",n,!0),t.removeEventListener("connect",e),t.removeEventListener("connectChildren",e),t.removeEventListener("nodeConnect",e),t.removeEventListener("nodeConnectChildren",e),t.removeEventListener("dispose",i),this.disconnectDOM=null},e=()=>{this.dispatchEvent(new Event("connectChildren"))},i=()=>{this.connect()},o=t=>{t.stopPropagation(),this.connect()};this.disconnectDOM.addEventListener("mousedown",o,!0),this.disconnectDOM.addEventListener("touchstart",o,!0),this.disconnectDOM.addEventListener("disconnect",n,!0),t.addEventListener("connect",e),t.addEventListener("connectChildren",e),t.addEventListener("nodeConnect",e),t.addEventListener("nodeConnectChildren",e),t.addEventListener("dispose",i)}}return this.dispatchEvent(new Event("connect")),!0}dispose(){this.dispatchEvent(new Event("dispose"))}serialize(t){const n=this.getHeight(),e=[],i=[];for(const n of this.inputs)e.push(n.toJSON(t).id);for(const n of this.links)null!==n.inputElement&&null!==n.outputElement&&i.push(n.outputElement.toJSON(t).id);this.inputLength>0&&(t.inputLength=this.inputLength),this.outputLength>0&&(t.outputLength=this.outputLength),e.length>0&&(t.inputs=e),i.length>0&&(t.links=i),""!==this.style&&(t.style=this.style),""!==n&&(t.height=n)}deserialize(t){if(void 0!==t.inputLength&&this.setInput(t.inputLength),void 0!==t.outputLength&&this.setOutput(t.outputLength),void 0!==t.inputs){const n=this.inputs;if(n.length>0){let e=0;for(const i of t.inputs)t.objects[i]=n[e++]}else for(const n of t.inputs)this.add(t.objects[n])}if(void 0!==t.links)for(const n of t.links)this.connect(t.objects[n]);void 0!==t.style&&this.setStyle(t.style),void 0!==t.height&&this.setHeight(t.height)}getLinkedObject(t=null){const n=this.getLinkedElement();return n?n.getObject(t):null}getLinkedElement(){const t=this.getLink();return t?t.outputElement:null}getLink(){return this.links[0]}_createIO(t){const{dom:n}=this,e=document.createElement("f-io");e.style.visibility="hidden",e.className=t;const s=s=>{s.preventDefault(),s.stopPropagation(),d=null;const r=this.node.dom;r.classList.add("io-connect"),e.classList.add("connect"),n.classList.add("select");const a="left"===l.InputDirection?"lio":"rio",c=t===a?new l(this):new l(null,this),p=new l(c.inputElement,c.outputElement);this.links.push(c),i(s,(i=>{p.outputElement&&p.outputElement.dom.classList.remove("invalid"),p.inputElement&&p.inputElement.dom.classList.remove("invalid"),p.inputElement=c.inputElement,p.outputElement=c.outputElement,t===a?p.outputElement=d:p.inputElement=d;const s=null!==p.inputElement&&null!==p.outputElement&&p.inputElement.inputLength>0&&p.outputElement.outputLength>0&&!1===o(p.inputElement.events.valid,p.inputElement,p.outputElement,i.dragging?"dragging":"dragged");if(i.dragging&&s)t===a?p.outputElement&&p.outputElement.dom.classList.add("invalid"):p.inputElement&&p.inputElement.dom.classList.add("invalid");else if(!i.dragging&&(r.classList.remove("io-connect"),e.classList.remove("connect"),n.classList.remove("select"),this.links.splice(this.links.indexOf(c),1),null!==d&&!s)){if(c.inputElement=p.inputElement,c.outputElement=p.outputElement,c.outputElement.node.isCircular(c.inputElement.node))return;c.inputElement.inputLength>0&&c.outputElement.outputLength>0&&c.inputElement.connect(c.outputElement)}}),"connecting")};return e.addEventListener("mousedown",s,!0),e.addEventListener("touchstart",s,!0),e}}c.prototype.isElement=!0;class p extends c{constructor(t=!0){super(!0),this.draggable=t;const n=t=>{t.preventDefault(),!0===this.draggable&&i(this.node.dom)},{dom:e}=this;e.addEventListener("mousedown",n,!0),e.addEventListener("touchstart",n,!0)}}const h=(t,n,e,i,o,s,r,a,l=null)=>{const d=e-t,c=i-n,p=Math.sqrt(d*d+c*c)*(o?-.3:.3);if(a.beginPath(),a.moveTo(t,n),a.bezierCurveTo(t+p,n,e-p,i,e,i),null!==l&&r!==l){const o=a.createLinearGradient(t,n,e,i);o.addColorStop(0,r),o.addColorStop(1,l),a.strokeStyle=o}else a.strokeStyle=r;a.lineWidth=s,a.stroke()},u=["#ff4444","#44ff44","#4444ff"],f=(new a).add(new class extends p{constructor(t,n=!0){super(n);const{dom:e}=this;e.className="title";const i=document.createElement("span");i.innerText=t;const o=document.createElement("i"),s=document.createElement("f-toolbar");this.buttons=[],this.spanDOM=i,this.iconDOM=o,this.toolbarDOM=s,e.append(i),e.append(o),e.append(s)}setIcon(t){return this.iconDOM.className=t,this}getIcon(){return this.iconDOM.className}setTitle(t){return this.spanDOM.innerText=t,this}getTitle(){return this.spanDOM.innerText}addButton(t){return this.buttons.push(t),this.toolbarDOM.append(t.dom),this}serialize(t){super.serialize(t);const n=this.getTitle(),e=this.getIcon();t.title=n,""!==e&&(t.icon=e)}deserialize(t){super.deserialize(t),this.setTitle(t.title),void 0!==t.icon&&this.setIcon(t.icon)}}("File")).setWidth(250);class m extends e{constructor(){super();const t=document.createElement("f-canvas"),n=document.createElement("f-content"),e=document.createElement("f-area"),r=document.createElement("f-drop"),a=document.createElement("canvas"),l=document.createElement("canvas"),d=a.getContext("2d"),c=l.getContext("2d");this.dom=t,this.contentDOM=n,this.areaDOM=e,this.dropDOM=r,this.canvas=a,this.frontCanvas=l,this.context=d,this.frontContext=c,this.width=1e4,this.height=1e4,this.clientX=0,this.clientY=0,this.relativeClientX=0,this.relativeClientY=0,this.zoom=1,this.nodes=[],this.selected=null,this.updating=!1,this.droppedItems=[],this.events={drop:[]},l.className="front",n.style.left=s(this.centerX),n.style.top=s(this.centerY),e.style.width=`calc( 100% + ${this.width}px )`,e.style.height=`calc( 100% + ${this.height}px )`,r.innerHTML="<span>drop your file</span>",t.append(r),t.append(a),t.append(l),t.append(n),t.append(e);const p=t=>{t.touches?2===t.touches.length&&(t.preventDefault(),t.stopImmediatePropagation()):(t.preventDefault(),t.stopImmediatePropagation())};t.addEventListener("wheel",p),t.addEventListener("touchmove",p);let h=0;const u=t=>{t?0==h++&&(this.droppedItems=[],r.classList.add("visible"),this.add(f)):0==--h&&(r.classList.remove("visible"),this.remove(f))};t.addEventListener("dragenter",(()=>{u(!0)})),t.addEventListener("dragleave",(()=>{u(!1)})),t.addEventListener("dragover",(t=>{t.preventDefault();const{relativeClientX:n,relativeClientY:e}=this,i=f.getWidth()/2;f.setPosition(n-i,e-20)})),t.addEventListener("drop",(t=>{t.preventDefault(),u(!1),this.droppedItems=t.dataTransfer.items,o(this.events.drop,this)})),i(t,(n=>{const{delta:e,isTouch:i}=n;i||(void 0===n.scrollTop&&(n.scrollLeft=t.scrollLeft,n.scrollTop=t.scrollTop),t.scrollLeft=n.scrollLeft-e.x,t.scrollTop=n.scrollTop-e.y),n.dragging?t.classList.add("grabbing"):t.classList.remove("grabbing")}),"dragging-canvas"),this._onMoveEvent=n=>{const e=n.touches?n.touches[0]:n,{zoom:i,rect:o}=this;this.clientX=e.clientX,this.clientY=e.clientY,this.relativeClientX=(t.scrollLeft-this.centerX+e.clientX-o.left)/i,this.relativeClientY=(t.scrollTop-this.centerY+e.clientY-o.top)/i},this._onContentLoaded=()=>{this.centralize()},this._onUpdate=()=>{this.update()},this.start()}get rect(){return this.dom.getBoundingClientRect()}get relativeX(){return this.dom.scrollLeft-this.centerX}get relativeY(){return this.dom.scrollTop-this.centerY}get centerX(){return this.width/2}get centerY(){return this.height/2}onDrop(t){return this.events.drop.push(t),this}start(){this.updating=!0,document.addEventListener("wheel",this._onMoveEvent,!0),document.addEventListener("mousedown",this._onMoveEvent,!0),document.addEventListener("touchstart",this._onMoveEvent,!0),document.addEventListener("mousemove",this._onMoveEvent,!0),document.addEventListener("touchmove",this._onMoveEvent,!0),document.addEventListener("dragover",this._onMoveEvent,!0),document.addEventListener("DOMContentLoaded",this._onContentLoaded),requestAnimationFrame(this._onUpdate)}stop(){this.updating=!1,document.removeEventListener("wheel",this._onMoveEvent,!0),document.removeEventListener("mousedown",this._onMoveEvent,!0),document.removeEventListener("touchstart",this._onMoveEvent,!0),document.removeEventListener("mousemove",this._onMoveEvent,!0),document.removeEventListener("touchmove",this._onMoveEvent,!0),document.removeEventListener("dragover",this._onMoveEvent,!0),document.removeEventListener("DOMContentLoaded",this._onContentLoaded)}add(t){if(t.canvas!==this)return this.nodes.push(t),t.canvas=this,this.contentDOM.append(t.dom),this}remove(t){t===this.selected&&this.select(),this.unlink(t);const n=this.nodes;return n.splice(n.indexOf(t),1),t.canvas=null,this.contentDOM.removeChild(t.dom),t.dispatchEvent(new Event("remove")),this}clear(){const t=this.nodes;for(;t.length>0;)this.remove(t[0]);return this}unlink(t){const n=this.getLinks();for(const e of n)e.inputElement&&e.outputElement&&(e.inputElement.node===t||e.outputElement.node===t)&&e.inputElement.connect()}getLinks(){const t=[];for(const n of this.nodes)t.push(...n.getLinks());return t}centralize(){return this.dom.scroll(this.centerX,this.centerY),this}select(t=null){if(t===this.selected)return;const n=this.selected;null!==n&&(n.dom.classList.remove("selected"),this.selected=null,o(n.events.blur,n)),null!==t&&(t.dom.classList.add("selected"),this.selected=t,o(t.events.focus,t))}update(){if(!1===this.updating)return;requestAnimationFrame(this._onUpdate);const{dom:t,zoom:n,canvas:e,frontCanvas:i,frontContext:o,context:s}=this,r=window.innerWidth,a=window.innerHeight,l=this.rect;e.width===r&&e.height===a||(e.width=r,e.height=a,i.width=r,i.height=a),s.clearRect(0,0,r,a),o.clearRect(0,0,r,a),s.globalCompositeOperation="lighter",o.globalCompositeOperation="source-over";const d=this.getLinks(),c={x:0,y:0},p={x:0,y:0};let f="";for(const t of d){const{lioElement:e,rioElement:i}=t;let r="",a=0;if(null!==e){const t=e.dom.getBoundingClientRect();a=Math.max(a,e.rioLength),c.x=t.x+t.width,c.y=t.y+t.height/2}else c.x=this.clientX,c.y=this.clientY,r="lio";if(null!==i){const t=i.dom.getBoundingClientRect();a=Math.max(a,i.lioLength),p.x=t.x,p.y=t.y+t.height/2}else p.x=this.clientX,p.y=this.clientY,r="rio";f=f||r;const l=r?o:s;if(r||1===a){let t=null,o=null;"rio"===r?(t=o=e.getRIOColor(),c.x+=10,p.x/=n,p.y/=n):"lio"===r?(t=o=i.getLIOColor(),p.x-=10,c.x/=n,c.y/=n):(t=e.getRIOColor(),o=i.getLIOColor()),h(c.x*n,c.y*n,p.x*n,p.y*n,!1,2,t||"#ffffff",l,o||"#ffffff")}else{a=Math.min(a,4);for(let t=0;t<a;t++){const o=u[t]||"#ffffff",s=4,r=Math.min(e.rioLength,a),d=Math.min(i.lioLength,a),f=e.getRIOColor()||o,m=i.getLIOColor()||o,g=r*s*.5-s/2,b=d*s*.5-s/2,x=Math.min(t,r-1)*s-1,v=Math.min(t,d-1)*s-1;h(c.x*n,(c.y+x-g)*n,p.x*n,(p.y+v-b)*n,!1,2,f,l,m)}}}s.globalCompositeOperation="destination-in",s.fillRect(l.x,l.y,l.width,l.height),""!==f?t.classList.add("dragging-"+f):(t.classList.remove("dragging-lio"),t.classList.remove("dragging-rio"))}serialize(t){const n=[];for(const e of this.nodes)n.push(e.toJSON(t).id);t.nodes=n}deserialize(t){for(const n of t.nodes)this.add(t.objects[n])}}class g{constructor(){this.default={node:{className:"Node",path:"./core/Node.js"},element:{className:"Element",path:"./core/Element.js"},input:{className:"Input",path:"./core/Input.js"}},this.cache={node:new Map([["object",{className:"ObjectNode",path:"./nodes/ObjectNode.js"}],["panel",{className:"PanelNode",path:"./nodes/PanelNode.js"}]]),element:new Map([["draggable",{className:"DraggableElement",path:"./elements/DraggableElement.js"}],["label",{className:"LabelElement",path:"./elements/LabelElement.js"}],["title",{className:"TitleElement",path:"./elements/TitleElement.js"}]]),input:new Map([["button",{className:"ButtonInput",path:"./inputs/ButtonInput.js"}],["color",{className:"ColorInput",path:"./inputs/ColorInput.js"}],["number",{className:"NumberInput",path:"./inputs/NumberInput.js"}],["select",{className:"SelectInputs",path:"./inputs/SelectInputs.js"}],["slider",{className:"SliderInputs",path:"./inputs/SliderInputs.js"}],["string",{className:"StringInput",path:"./inputs/StringInput.js"}],["Text",{className:"TextInput",path:"./inputs/TextInput.js"}],["Toggle",{className:"ToggleInput",path:"./inputs/ToggleInput.js"}]])}}add(t,n,e){this.cache[t].set(n,e)}get(t,n){return this.cache[t].has(n)?this.cache[t].get(n):this.default[t]}remove(t,n){this.cache[t].delete(n)}}class b extends HTMLElement{constructor(n){super(),this.options=(t=>{let n={components:new g};const{width:e,height:i,components:o}=t;if("number"==typeof e&&(n.width=s(e)),"number"==typeof i&&(n.height=s(i)),o)if(Array.isArray(o))o.forEach((({type:t,name:e,desc:i})=>{n.components.add(t,e,i)}));else if("object"==typeof o){const{type:t,name:e,desc:i}=o;n.components.add(t,e,i)}return n})(n),this.attachShadow({mode:"open"});const e=new CSSStyleSheet;e.replace(`\n            :host {\n                position: absolute;\n                width: ${this.options.width};\n                height: ${this.options.height};\n            }\n        `),this.shadowRoot.adoptedStyleSheets=[t,e]}connectedCallback(){this.canvas=new m,this.shadowRoot.append(this.canvas.dom),b.onDrop=this.canvas.onDrop.bind(this.ondrop),b.start=this.canvas.start.bind(this.canvas),b.stop=this.canvas.stop.bind(this.canvas),b.delete=this.canvas.remove.bind(this.canvas),b.clear=this.canvas.clear.bind(this.canvas),b.destory=super.remove,b.unlink=this.canvas.unlink.bind(this.canvas),b.getLinks=this.canvas.getLinks.bind(this.canvas),b.centralize=this.canvas.getLinks.bind(this.canvas),b.select=this.canvas.select.bind(this.canvas),b.update=this.canvas.update.bind(this.canvas),b.serialize=this.canvas.serialize.bind(this.canvas),b.deserialize=this.canvas.deserialize.bind(this.canvas)}async add(...t){for(const n of t){if("object"!=typeof n)throw new TypeError(`Invalid ${n} type ${typeof n}`);const{elements:t,...e}=n,{className:i,path:o}=this.options.components.get("node",e.type),s=new((await import(o))[i])(e.params);e.handle&&e.handle.call(s,s);for(const n of t){if("object"!=typeof n)throw new TypeError(`Invalid ${n} type ${typeof n}`);const{inputs:t,...e}=n,{className:i,path:o}=this.options.components.get("element",e.type),r=new((await import(o))[i])(e.params);e.handle&&e.handle.call(r,r);for(const n of t){if("object"!=typeof n)throw new TypeError(`Invalid ${n} type ${typeof n}`);const t=n,{className:e,path:i}=this.options.components.get("input",t.type),o=new((await import(i))[e])(t.params);t.handle&&t.handle.call(o,o),r.add(o)}s.add(r)}this.canvas.add(s)}return this.canvas}}customElements.define("f-master",b);export{g as Component,b as default};
